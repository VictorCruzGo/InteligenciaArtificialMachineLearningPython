$(function(){var a=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);if(a){doStuff()}else{AUI().ready("node","aui-io-request","aui-parse-content","aui-sortable","dd-constrain","dd-proxy","dd-drop",function(b){b.all("div.question-page-current ul.sortable").each(function(c){new b.Sortable({container:c,nodes:"li"})});b.DD.DDM.on("drag:start",function(d){var c=d.target;c.get("node").setStyle("opacity",".25");c.get("dragNode").set("innerHTML",c.get("node").get("innerHTML"));c.get("dragNode").setStyles({opacity:".5",borderColor:c.get("node").getStyle("borderColor"),backgroundColor:c.get("node").getStyle("backgroundColor")})});b.DD.DDM.on("drag:end",function(d){var c=d.target;c.get("node").setStyles({visibility:"",opacity:"1"})});b.all(".draganddrop").each(function(d){var c="#"+d.attr("id");b.all(c+" > .items > div").each(function(g,f){var e=new b.DD.Drag({container:c,node:g,groups:["group1","group2"]}).plug(b.Plugin.DDProxy,{moveOnEnd:false}).plug(b.Plugin.DDConstrained,{constrain2node:c})});b.all(c+" > .drop > .drop-containers > div").each(function(g,f){var e=new b.DD.Drag({node:g,groups:["group2"]}).plug(b.Plugin.DDProxy,{moveOnEnd:false}).plug(b.Plugin.DDConstrained,{constrain2node:c})});b.all(c+" > .drop > .drop-containers").each(function(f,e){var g=new b.DD.Drop({node:f,groups:["group1"]});g.on("drop:hit",function(k){var h=k.drop.get("node"),i=k.drag.get("node");var j=i.get("parentNode");if(!h.hasClass("occupied")&&i.attr("tagName").toLowerCase()==="div"&&j.hasClass("items")){h.text("");h.append(i);h.addClass("occupied");h.removeClass("base");b.one('input[name="'+h.attr("name")+'hidden"]').val(i.attr("id"))}})});b.all(c+" > .items").each(function(f,e){var g=new b.DD.Drop({node:f,groups:["group2"]});g.on("drop:hit",function(m){var h=m.drop.get("node"),k=m.drag.get("node");var l=k.get("parentNode");if(k.attr("tagName").toLowerCase()==="div"&&l.hasClass("drop-containers")){h.append(k);var i=l.attr("id");var j=i.replace(/[^\d]/g,"");l.text(Liferay.Language.get("drop",j));l.removeClass("occupied");l.addClass("base");b.one('input[name="'+l.attr("name")+'hidden"]').val(-1)}})})})})}});function doStuff(){$.each($(".items>div"),function(a,b){$(b).draggable({revert:"invalid",tolerance:"fit",start:function(f,d){var c=f.target}})});$.each($(".drop div"),function(a,b){if($(b).hasClass("occupied")){$(b).draggable({revert:"invalid",tolerance:"fit",start:function(d,c){}})}});$(".items").droppable({accept:".drop div",drop:function(d,e){var a=d.target;drag=e.draggable[0];var f=$(drag).parent();$(drag).css("left","0");$(drag).css("top","0");if($(drag).prop("tagName").toLowerCase()==="div"&&$(f).hasClass("drop-containers")){$(a).append(drag);var b=$(f).attr("id");var c=b.replace(/[^\d]/g,"");$(f).text(Liferay.Language.get("drop",c));$(f).removeClass("occupied");$(f).addClass("base");$('input[name="'+$(f).attr("name")+'hidden"]').val(-1)}}});$(".drop-containers").droppable({drop:function(b,c){var a=b.target;drag=c.draggable[0];var d=$(drag).parent();$(drag).css("left","0");$(drag).css("top","0");if(!$(a).hasClass("occupied")&&$(drag).prop("tagName").toLowerCase()==="div"&&$(d).hasClass("items")){$(a).text("");$(a).append(drag);$(a).addClass("occupied");$(a).removeClass("base");$('input[name="'+$(a).attr("name")+'hidden"]').val($(drag).attr("id"))}}});$("div.question-page-current ul.sortable").sortable({start:function(c,b){var a=c.target}})};